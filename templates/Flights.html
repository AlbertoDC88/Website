<!-- templates/registration/login.html -->
{% extends 'base.html' %} 

{% block title %}Flight Search{% endblock %}

<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
.slidecontainer {
    width: 100%;
}

.slider {
    -webkit-appearance: none;
    width: 100%;
    height: 15px;
    border-radius: 5px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
}

.slider:hover {
    opacity: 1;
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: #4CAF50;
    cursor: pointer;
}

.slider::-moz-range-thumb {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: #4CAF50;
    cursor: pointer;
}
</style>
</head>

{% block content %}
<h1>Flight Search</h1>
{% if user.is_authenticated %}
	Hi {{ user.username }}!, where would you like to fly today?
<p></p>	

<p></p>	

<form action=" " method="POST">
	{% csrf_token %}
    <label for="Origin">From: </label>
    <input id="Origin" type="text" name="Origin" >
    <label for="Destination">To: </label>
    <input id="Destination" type="text" name="Destination" >
	<label for="Departure">Departure: </label>
    <input id="Departure" type="text" name="Departure" >
	<p></p>
    <input type="submit" name="Search" value="Search">
	<p></p>	
</form>

{% if FlightMatrix %}
<form action=" " method="POST">
	{% csrf_token %}
	<div class="""slidecontainer">
	<input type="range" min={{MinPrice}} max="100" value="{{MinPrice}}" class="slider2" id="MinRange">
	<p>Min Price: <span id="Min_P" name="Min_P"></span></p>
	<input type="range" min="1" max={{MaxPrice}} value={{MaxPrice}} class="slider" id="MaxRange">
	<p>Max Price: <span id="Max_P" name="Max_P"></span></p>
	</div>
    <input type="submit" name="Filter" value="Filter">
	<p></p>	
</form>

<script>
var slider = document.getElementById("MaxRange");
var slider2 = document.getElementById("MinRange");
var output = document.getElementById("Max_P");
var output2 = document.getElementById("Min_P");
output.innerHTML = slider.value;
output2.innerHTML = slider2.value;

slider.oninput = function() {
  output.innerHTML = this.value;
}

slider2.oninput = function() {
  output2.innerHTML = this.value;
}
</script>

{% endif %}

<p>Search Results for flights from {{ Origin }} to {{ Destination }} the {{ Departure }} at a Total Price of {{ TotalPrice }}</p>
<p></p>

{% for flights in FlightMatrix %}
	<li>
		<td> Option {{ flights.Option }} </td>
		<ul>
			<li> Number of Flights: {{ flights.NFlight }} 
			<ul>
			<p></p>
			{% for R in flights.Leg %}
				<li> {{ R.DTime }} - {{ R.ATime }} </li>
				<li> {{ R.DAirport }} - {{ R.AAirport }} </li>
				<li> {{ R.DDate }} </li>
				<p></p>
			{% endfor %}
			</ul>
			</li>
			<li> {{ flights.RMap }} </li>
			<li> Total Flight Time: {{ flights.TFlightTime }} </li>
			<p></p>
			<li> {{ flights.TPrice }} </li>
		</ul>
	</li>
{% endfor %}

<p></p>	
  <p><a href="{% url 'logout' %}">logout</a></p>
{% else %}
	<form method="post">
		{% csrf_token %}
		{{ form.as_p }}
		<button type="submit">Login</button>
	</form>
{% endif %}
{% endblock %}